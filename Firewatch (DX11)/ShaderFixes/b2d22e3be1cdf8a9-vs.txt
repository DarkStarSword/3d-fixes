// asmtool.py -I ../.. --auto-fix-vertex-halo --fix-unusual-halo-with-inconsistent-w-optimisation --fix-unity-reflection --fix-unity-frustum-world --only-autofixed b2d22e3be1cdf8a9-vs.txt
// 3DMigoto: b2d22e3be1cdf8a9 | Matched 8 variants of 8 shaders: Hidden/Amplify Color/Base, Hidden/Amplify Color/Blend, Hidden/Amplify Color/BlendCache, Hidden/Amplify Color/DepthMask, Hidden/Amplify Color/DepthMaskBlend, Hidden/Amplify Color/Mask, Hidden/Amplify Color/MaskBlend, Hidden/Amplify Color/ProcessOnly
//
// 40:            Unity headers extracted from Hidden_Amplify Color_Base
// 80:            Unity headers extracted from Hidden_Amplify Color_Blend
// 08:            Unity headers extracted from Hidden_Amplify Color_DepthMask
// 01:            Unity headers extracted from Hidden_Amplify Color_DepthMaskBlend
// 02:            Unity headers extracted from Hidden_Amplify Color_Mask
// 04:            Unity headers extracted from Hidden_Amplify Color_MaskBlend
// 20:            Unity headers extracted from Hidden_Amplify Color_ProcessOnly
// 10:    Unity headers extracted from Hidden_Amplify Color_BlendCache
// 40:            Shader "Hidden/Amplify Color/Base" {
// 80:            Shader "Hidden/Amplify Color/Blend" {
// 08:            Shader "Hidden/Amplify Color/DepthMask" {
// 01:            Shader "Hidden/Amplify Color/DepthMaskBlend" {
// 02:            Shader "Hidden/Amplify Color/Mask" {
// 04:            Shader "Hidden/Amplify Color/MaskBlend" {
// 20:            Shader "Hidden/Amplify Color/ProcessOnly" {
// 10:    Shader "Hidden/Amplify Color/BlendCache" {
// ef:              SubShader 1/1 {
// 10:      SubShader 1/1 {
// 10:        Pass 1/1 {
// ef: 000000001:     Pass 1/36 {
// 10:          ZWrite Off
// ef: 000000200:     Pass 10/36 {
// 10:          Program "vp" {
// ef: 000000400:     Pass 11/36 {
// 10:            SubProgram "d3d11" {
// ef: 000000800:     Pass 12/36 {
// ef: 000001000:     Pass 13/36 {
// ef: 000002000:     Pass 14/36 {
// ef: 000004000:     Pass 15/36 {
// ef: 000008000:     Pass 16/36 {
// ef: 000010000:     Pass 17/36 {
// ef: 000020000:     Pass 18/36 {
// ef: 000040000:     Pass 19/36 {
// ef: 000000002:     Pass 2/36 {
// ef: 000080000:     Pass 20/36 {
// ef: 000100000:     Pass 21/36 {
// ef: 000200000:     Pass 22/36 {
// ef: 000400000:     Pass 23/36 {
// ef: 000800000:     Pass 24/36 {
// ef: 001000000:     Pass 25/36 {
// ef: 002000000:     Pass 26/36 {
// ef: 004000000:     Pass 27/36 {
// ef: 008000000:     Pass 28/36 {
// ef: 010000000:     Pass 29/36 {
// ef: 000000004:     Pass 3/36 {
// ef: 020000000:     Pass 30/36 {
// ef: 040000000:     Pass 31/36 {
// ef: 080000000:     Pass 32/36 {
// ef: 100000000:     Pass 33/36 {
// ef: 200000000:     Pass 34/36 {
// ef: 400000000:     Pass 35/36 {
// ef: 800000000:     Pass 36/36 {
// ef: 000000008:     Pass 4/36 {
// ef: 000000010:     Pass 5/36 {
// ef: 000000020:     Pass 6/36 {
// ef: 000000040:     Pass 7/36 {
// ef: 000000080:     Pass 8/36 {
// ef: 000000100:     Pass 9/36 {
// ef:                  ZWrite Off
// ef:                  Program "vp" {
// ef:                    SubProgram "d3d11" {
// ef:                    }
// ef:                  }
// ef:                }
// ef:              }
//                }
// 10:          }
// 10:        }
// 10:      }
// 10:    }
//
// 40: Unity 5.3 headers extracted from Hidden_Amplify Color_Base:
// 80: Unity 5.3 headers extracted from Hidden_Amplify Color_Blend:
// 10: Unity 5.3 headers extracted from Hidden_Amplify Color_BlendCache:
// 08: Unity 5.3 headers extracted from Hidden_Amplify Color_DepthMask:
// 01: Unity 5.3 headers extracted from Hidden_Amplify Color_DepthMaskBlend:
// 02: Unity 5.3 headers extracted from Hidden_Amplify Color_Mask:
// 04: Unity 5.3 headers extracted from Hidden_Amplify Color_MaskBlend:
// 20: Unity 5.3 headers extracted from Hidden_Amplify Color_ProcessOnly:
//       API d3d11
//       Shader model vs_4_0
//       undeciphered1: 201609010 13 0 0
//       undeciphered1a: 2
//       undeciphered2: 1 0 4 0 0 0
//       undeciphered3: 9 2 0 0 3 4
//       ConstBuffer "$Globals" 112
//       Vector 32 [_MainTex_TexelSize]
//       ConstBuffer "UnityPerCamera" 144
//       Vector 80 [_ProjectionParams]
//       ConstBuffer "UnityPerDraw" 160
//       Matrix 0 [unity_ObjectToWorld]
//       ConstBuffer "UnityPerFrame" 384
//       Matrix 272 [unity_MatrixVP]
//       BindCB "$Globals" 0
//       BindCB "UnityPerCamera" 1
//       BindCB "UnityPerDraw" 2
//       BindCB "UnityPerFrame" 3
//
// Headers extracted with DarkStarSword's extract_unity55_shaders.py
// https://github.com/DarkStarSword/3d-fixes

//
// Generated by Microsoft (R) D3D Shader Disassembler
//
//   using 3Dmigoto v1.3.2 on Thu Apr 26 06:10:05 2018
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// POSITION                 0   xyzw        0     NONE   float   xyz
// TEXCOORD                 0   xy          1     NONE   float   xy
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float   xyzw
// TEXCOORD                 0   xyzw        1     NONE   float   xyzw
// TEXCOORD                 1   xyzw        2     NONE   float   xyzw
//
vs_4_0
dcl_constantbuffer cb0[3], immediateIndexed
dcl_constantbuffer cb1[6], immediateIndexed
dcl_constantbuffer cb2[4], immediateIndexed
dcl_constantbuffer cb3[21], immediateIndexed
dcl_input v0.xyz
dcl_input v1.xy
dcl_output_siv o0.xyzw, position
dcl_output o1.xyzw
dcl_output o2.xyzw
dcl_temps 3

// 3DMigoto StereoParams:
dcl_resource_texture2d (float,float,float,float) t125

ld_indexable(texture2d)(float,float,float,float) r2.xyzw, l(0, 0, 0, 0), t125.xyzw

mul r0.xyzw, v0.yyyy, cb2[1].xyzw
mad r0.xyzw, cb2[0].xyzw, v0.xxxx, r0.xyzw
mad r0.xyzw, cb2[2].xyzw, v0.zzzz, r0.xyzw
add r0.xyzw, r0.xyzw, cb2[3].xyzw
mul r1.xyzw, r0.yyyy, cb3[18].xyzw
mad r1.xyzw, cb3[17].xyzw, r0.xxxx, r1.xyzw
mad r1.xyzw, cb3[19].xyzw, r0.zzzz, r1.xyzw
mad r0.xyzw, cb3[20].xyzw, r0.wwww, r1.xyzw
mov o0.xyzw, r0.xyzw

// Automatic vertex shader halo fix inserted with DarkStarSword's asmtool.py:
// asmtool.py -I ../.. --auto-fix-vertex-halo --fix-unusual-halo-with-inconsistent-w-optimisation --fix-unity-reflection --fix-unity-frustum-world --only-autofixed b2d22e3be1cdf8a9-vs.txt
ne r2.w, r0.w, l(1.0)
if_nz r2.w
  add r2.w, r0.w, -r2.y
  mad r0.x, r2.w, r2.x, r0.x
endif

mul r0.y, r0.y, cb1[5].x
mul r1.xzw, r0.xxwy, l(0.500000, 0.000000, 0.500000, 0.500000)
mov o1.zw, r0.zzzw
add o1.xy, r1.zzzz, r1.xwxx
lt r0.x, cb0[2].y, l(0.000000)
add r0.y, -v1.y, l(1.000000)
movc o2.w, r0.x, r0.y, v1.y
mov o2.xyz, v1.xyxx
ret
// Approximately 0 instruction slots used